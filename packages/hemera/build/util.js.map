{"version":3,"sources":["../lib/util.js"],"names":["Util","randomBytes","toString","hrtime","process","Math","floor","obj","pickBy","val","prop","includes","args","isString","sb","each","v","k","indexOf","isFunction","push","sort","join","module","exports"],"mappings":";;;;AAEA;;;;;;AAMA;;;;AACA;;;;;;;;AAEA;;;IAGMA,I;;;;;;;;AACJ;;;;;+BAKkB;;AAEhB,aAAO,iBAAOC,WAAP,CAAmB,EAAnB,EAAuBC,QAAvB,CAAgC,KAAhC,CAAP;AACD;;AAED;;;;;;;;;;;gCAQmB;;AAEjB,UAAMC,SAASC,QAAQD,MAAR,EAAf;AACA,aAAOE,KAAKC,KAAL,CAAWH,OAAO,CAAP,IAAY,OAAZ,GAAsBA,OAAO,CAAP,IAAY,IAA7C,CAAP;AACD;;AAED;;;;;;;;;;iCAOoBI,G,EAAK;;AAEvB,UAAIA,QAAQ,IAAZ,EAAkB,OAAOA,GAAP;;AAElB,aAAO,iBAAEC,MAAF,CAASD,GAAT,EAAc,UAAUE,GAAV,EAAeC,IAAf,EAA6B;AAChD,eAAO,CAAC,iBAAEC,QAAF,CAAWD,IAAX,EAAiB,GAAjB,CAAR;AACD,OAFM,CAAP;AAGD;;AAED;;;;;;;;;4BAMeE,I,EAAM;;AAEnB,UAAI,iBAAEC,QAAF,CAAWD,IAAX,CAAJ,EAAsB;AACpB,eAAOA,IAAP;AACD;;AAEDA,aAAOA,QAAQ,EAAf;AACA,UAAIE,KAAK,EAAT;AACA,uBAAEC,IAAF,CAAOH,IAAP,EAAa,UAAUI,CAAV,EAAaC,CAAb,EAAgB;AAC3B,YAAI,CAAC,CAACA,EAAEC,OAAF,CAAU,GAAV,CAAF,IAAoB,CAAC,iBAAEC,UAAF,CAAaH,CAAb,CAAzB,EAA0C;AACxCF,aAAGM,IAAH,CAAQH,IAAI,GAAJ,GAAUD,CAAlB;AACD;AACF,OAJD;;AAMAF,SAAGO,IAAH;;AAEA,aAAOP,GAAGQ,IAAH,CAAQ,GAAR,CAAP;AACD;;;;;;AAGHC,OAAOC,OAAP,GAAiBxB,IAAjB","file":"util.js","sourcesContent":["// @flow\r\n\r\n/*!\r\n * hemera\r\n * Copyright(c) 2016 Dustin Deus (deusdustin@gmail.com)\r\n * MIT Licensed\r\n */\r\n\r\nimport _ from 'lodash'\r\nimport Crypto from 'crypto'\r\n\r\n/**\r\n * @class Util\r\n */\r\nclass Util {\r\n  /**\r\n   * @returns\r\n   *\r\n   * @memberOf Util\r\n   */\r\n  static randomId() {\r\n\r\n    return Crypto.randomBytes(16).toString('hex')\r\n  }\r\n\r\n  /**\r\n   * Get high resolution time in nanoseconds\r\n   *\r\n   * @static\r\n   * @returns\r\n   *\r\n   * @memberOf Util\r\n   */\r\n  static nowHrTime() {\r\n\r\n    const hrtime = process.hrtime()\r\n    return Math.floor(hrtime[0] * 1000000 + hrtime[1] / 1000)\r\n  }\r\n\r\n  /**\r\n   * @static\r\n   * @param {any} obj\r\n   * @returns\r\n   *\r\n   * @memberOf Util\r\n   */\r\n  static cleanPattern(obj) {\r\n\r\n    if (obj === null) return obj\r\n\r\n    return _.pickBy(obj, function (val, prop: string) {\r\n      return !_.includes(prop, '$')\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @param {any} args\r\n   * @returns\r\n   *\r\n   * @memberOf Util\r\n   */\r\n  static pattern(args) {\r\n\r\n    if (_.isString(args)) {\r\n      return args\r\n    }\r\n\r\n    args = args || {}\r\n    let sb = []\r\n    _.each(args, function (v, k) {\r\n      if (!~k.indexOf('$') && !_.isFunction(v)) {\r\n        sb.push(k + ':' + v)\r\n      }\r\n    })\r\n\r\n    sb.sort()\r\n\r\n    return sb.join(',')\r\n  }\r\n}\r\n\r\nmodule.exports = Util\r\n"]}