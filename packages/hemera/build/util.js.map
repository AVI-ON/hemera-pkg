{"version":3,"sources":["../lib/util.js"],"names":["ID_LENGTH","ID_DIGITS","Util","n","i","rand","Math","floor","random","length","hrtime","process","obj","pickBy","val","prop","includes","args","isString","sb","each","v","k","indexOf","isFunction","push","sort","join"],"mappings":";;;;;;qjBAAA;;;;;;AAMA;;;;;;;;AAEA,IAAMA,YAAY,EAAlB;AACA,IAAMC,YAAY,kBAAlB;;AAEA;;;;IAGqBC,I;;;;;;;;AACnB;;;;;+BAKmB;AACjB,UAAIC,IAAI,EAAR;AACA,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,SAApB,EAA+BI,GAA/B,EAAoC;AAClC,YAAMC,OAAOC,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBP,UAAUQ,MAArC,CAAb;;AAEA;AACA,YAAIJ,SAAS,CAAT,IAAcF,EAAEM,MAAF,GAAW,CAA7B,EAAgC;AAC9BN,eAAKF,UAAUI,IAAV,CAAL;AACD;AACF;AACD,aAAOF,CAAP;AACD;;AAED;;;;;;;;;;;gCAQoB;AAClB,UAAMO,SAASC,QAAQD,MAAR,EAAf;AACA,aAAOJ,KAAKC,KAAL,CAAWG,OAAO,CAAP,IAAY,OAAZ,GAAsBA,OAAO,CAAP,IAAY,IAA7C,CAAP;AACD;;AAED;;;;;;;;;;iCAOqBE,G,EAAK;AACxB,UAAIA,QAAQ,IAAZ,EAAkB,OAAOA,GAAP;;AAElB,aAAO,iBAAEC,MAAF,CAASD,GAAT,EAAc,UAAUE,GAAV,EAAeC,IAAf,EAAqB;AACxC,eAAO,CAAC,iBAAEC,QAAF,CAAWD,IAAX,EAAiB,GAAjB,CAAR;AACD,OAFM,CAAP;AAGD;;AAED;;;;;;;;;4BAMgBE,I,EAAM;AACpB,UAAI,iBAAEC,QAAF,CAAWD,IAAX,CAAJ,EAAsB;AACpB,eAAOA,IAAP;AACD;;AAEDA,aAAOA,QAAQ,EAAf;AACA,UAAIE,KAAK,EAAT;AACA,uBAAEC,IAAF,CAAOH,IAAP,EAAa,UAAUI,CAAV,EAAaC,CAAb,EAAgB;AAC3B,YAAI,CAAC,CAACA,EAAEC,OAAF,CAAU,GAAV,CAAF,IAAoB,CAAC,iBAAEC,UAAF,CAAaH,CAAb,CAAzB,EAA0C;AACxCF,aAAGM,IAAH,CAAQH,IAAI,GAAJ,GAAUD,CAAlB;AACD;AACF,OAJD;;AAMAF,SAAGO,IAAH;;AAEA,aAAOP,GAAGQ,IAAH,CAAQ,GAAR,CAAP;AACD;;;;;;kBArEkBzB,I","file":"util.js","sourcesContent":["/*!\n * hemera\n * Copyright(c) 2016 Dustin Deus (deusdustin@gmail.com)\n * MIT Licensed\n */\n\nimport _ from 'lodash'\n\nconst ID_LENGTH = 16\nconst ID_DIGITS = '0123456789abcdef'\n\n/**\n * @class Util\n */\nexport default class Util {\n  /**\n   * @returns\n   *\n   * @memberOf Util\n   */\n  static randomId () {\n    let n = ''\n    for (let i = 0; i < ID_LENGTH; i++) {\n      const rand = Math.floor(Math.random() * ID_DIGITS.length)\n\n      // avoid leading zeroes\n      if (rand !== 0 || n.length > 0) {\n        n += ID_DIGITS[rand]\n      }\n    }\n    return n\n  }\n\n  /**\n   * Get high resolution time in nanoseconds\n   *\n   * @static\n   * @returns\n   *\n   * @memberOf Util\n   */\n  static nowHrTime () {\n    const hrtime = process.hrtime()\n    return Math.floor(hrtime[0] * 1000000 + hrtime[1] / 1000)\n  }\n\n  /**\n   * @static\n   * @param {any} obj\n   * @returns\n   *\n   * @memberOf Util\n   */\n  static cleanPattern (obj) {\n    if (obj === null) return obj\n\n    return _.pickBy(obj, function (val, prop) {\n      return !_.includes(prop, '$')\n    })\n  }\n\n  /**\n   * @param {any} args\n   * @returns\n   *\n   * @memberOf Util\n   */\n  static pattern (args) {\n    if (_.isString(args)) {\n      return args\n    }\n\n    args = args || {}\n    let sb = []\n    _.each(args, function (v, k) {\n      if (!~k.indexOf('$') && !_.isFunction(v)) {\n        sb.push(k + ':' + v)\n      }\n    })\n\n    sb.sort()\n\n    return sb.join(',')\n  }\n}\n"]}