{"version":3,"sources":["../lib/serverResponse.js"],"names":["ServerResponse","_response","value","Error","isFunction","next","error"],"mappings":";;;;;;qjBAAA;;;;;;AAMA;;;;;;;;AAEA;;;IAGqBA,c;;AAEnB;;;;;;;AAOA,4BAAe;AAAA;;AACb,SAAKC,SAAL,GAAiB,EAAjB;AACD;;AAED;;;;;;;;;;;wBAOKC,K,EAAO;AACV,UAAIA,iBAAiBC,KAArB,EAA4B;AAC1B,YAAI,iBAAEC,UAAF,CAAa,KAAKC,IAAlB,CAAJ,EAA6B;AAC3B,eAAKA,IAAL,CAAUH,KAAV;AACD;AACF,OAJD,MAIO;AACL,YAAI,iBAAEE,UAAF,CAAa,KAAKC,IAAlB,CAAJ,EAA6B;AAC3B,eAAKA,IAAL,CAAU,IAAV,EAAgBH,KAAhB,EAAuB,IAAvB;AACD;AACF;AACF;;AAED;;;;;;;;;;yBAOMA,K,EAAO;AACX,UAAIA,iBAAiBC,KAArB,EAA4B;AAC1B,YAAI,iBAAEC,UAAF,CAAa,KAAKC,IAAlB,CAAJ,EAA6B;AAC3B,eAAKA,IAAL,CAAUH,KAAV;AACD;AACF,OAJD,MAIO;AACL,YAAI,iBAAEE,UAAF,CAAa,KAAKC,IAAlB,CAAJ,EAA6B;AAC3B,eAAKA,IAAL,CAAU,IAAV,EAAgBH,KAAhB;AACD;AACF;AACF;;AAED;;;;;;;;;;wBAOe;AACb,aAAO,KAAKD,SAAL,CAAeC,KAAtB;AACD;;AAED;;;;;;;sBAMaA,K,EAAO;AAClB,WAAKD,SAAL,CAAeC,KAAf,GAAuBA,KAAvB;AACD;;AAED;;;;;;;;;sBAMWI,K,EAAO;AAChB,WAAKL,SAAL,CAAeK,KAAf,GAAuBA,KAAvB;AACD;;AAED;;;;;;;;wBAOa;AACX,aAAO,KAAKL,SAAL,CAAeK,KAAtB;AACD;;;;;;kBA3FkBN,c","file":"serverResponse.js","sourcesContent":["/*!\r\n * hemera\r\n * Copyright(c) 2016 Dustin Deus (deusdustin@gmail.com)\r\n * MIT Licensed\r\n */\r\n\r\nimport _ from 'lodash'\r\n\r\n/**\r\n * @class ServerResponse\r\n */\r\nexport default class ServerResponse {\r\n\r\n  /**\r\n   * Creates an instance of ServerResponse.\r\n   *\r\n   * @param {Hemera} ctx\r\n   *\r\n   * @memberOf ServerResponse\r\n   */\r\n  constructor () {\r\n    this._response = {}\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} value\r\n   *\r\n   * @memberOf ServerResponse\r\n   */\r\n  end (value) {\r\n    if (value instanceof Error) {\r\n      if (_.isFunction(this.next)) {\r\n        this.next(value)\r\n      }\r\n    } else {\r\n      if (_.isFunction(this.next)) {\r\n        this.next(null, value, true)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} value\r\n   *\r\n   * @memberOf ServerResponse\r\n   */\r\n  send (value) {\r\n    if (value instanceof Error) {\r\n      if (_.isFunction(this.next)) {\r\n        this.next(value)\r\n      }\r\n    } else {\r\n      if (_.isFunction(this.next)) {\r\n        this.next(null, value)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @readonly\r\n   * @type {*}\r\n   * @memberOf ServerResponse\r\n   */\r\n  get payload () {\r\n    return this._response.value\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   *\r\n   * @memberOf ServerResponse\r\n   */\r\n  set payload (value) {\r\n    this._response.value = value\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   *\r\n   * @memberOf ServerResponse\r\n   */\r\n  set error (error) {\r\n    this._response.error = error\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @readonly\r\n   * @type {*}\r\n   * @memberOf ServerResponse\r\n   */\r\n  get error () {\r\n    return this._response.error\r\n  }\r\n\r\n}\r\n"]}