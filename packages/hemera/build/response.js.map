{"version":3,"sources":["../lib/response.js"],"names":["Response","ctx","value","Error","isFunction","next","_response","error","module","exports"],"mappings":";;;;AAEA;;;;;;AAMA;;;;;;;;AAEA;;;IAGMA,Q;;AAKJ;;;;;;;AAOA,oBAAYC,GAAZ,EAAyB;AAAA;;AAEvB,SAAKA,GAAL,GAAWA,GAAX;AACD;;AAED;;;;;;;;;;;wBAOIC,K,EAAY;;AAEd,UAAIA,iBAAiBC,KAArB,EAA4B;;AAE1B,YAAI,iBAAEC,UAAF,CAAa,KAAKC,IAAlB,CAAJ,EAA6B;AAC3B,eAAKA,IAAL,CAAUH,KAAV;AACD;AACF,OALD,MAKO;;AAEL,YAAI,iBAAEE,UAAF,CAAa,KAAKC,IAAlB,CAAJ,EAA6B;AAC3B,eAAKA,IAAL,CAAU,IAAV,EAAgBH,KAAhB,EAAuB,IAAvB;AACD;AACF;AAEF;;AAED;;;;;;;;;;yBAOKA,K,EAAY;;AAEf,UAAIA,iBAAiBC,KAArB,EAA4B;;AAE1B,YAAI,iBAAEC,UAAF,CAAa,KAAKC,IAAlB,CAAJ,EAA6B;AAC3B,eAAKA,IAAL,CAAUH,KAAV;AACD;AACF,OALD,MAKO;;AAEL,YAAI,iBAAEE,UAAF,CAAa,KAAKC,IAAlB,CAAJ,EAA6B;AAC3B,eAAKA,IAAL,CAAU,IAAV,EAAgBH,KAAhB;AACD;AACF;AAEF;;AAED;;;;;;;;;;wBAOmB;;AAEjB,aAAO,KAAKD,GAAL,CAASK,SAAT,CAAmBJ,KAA1B;AACD;;AAED;;;;;;;sBAMYA,K,EAAO;;AAEjB,WAAKD,GAAL,CAASK,SAAT,CAAmBJ,KAAnB,GAA2BA,KAA3B;AACD;;AAED;;;;;;;;;sBAMUK,K,EAAO;;AAEf,WAAKN,GAAL,CAASK,SAAT,CAAmBC,KAAnB,GAA2BA,KAA3B;AACD;;AAED;;;;;;;;wBAOiB;;AAEf,aAAO,KAAKN,GAAL,CAASK,SAAT,CAAmBC,KAA1B;AACD;;;;;;AAIHC,OAAOC,OAAP,GAAiBT,QAAjB","file":"response.js","sourcesContent":["// @flow\r\n\r\n/*!\r\n * hemera\r\n * Copyright(c) 2016 Dustin Deus (deusdustin@gmail.com)\r\n * MIT Licensed\r\n */\r\n\r\nimport _ from 'lodash'\r\n\r\n/**\r\n * @class Response\r\n */\r\nclass Response {\r\n\r\n  next: Function;\r\n  ctx: Hemera;\r\n\r\n  /**\r\n   * Creates an instance of Response.\r\n   *\r\n   * @param {Hemera} ctx\r\n   *\r\n   * @memberOf Response\r\n   */\r\n  constructor(ctx: Hemera) {\r\n\r\n    this.ctx = ctx\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} value\r\n   *\r\n   * @memberOf Response\r\n   */\r\n  end(value: any) {\r\n\r\n    if (value instanceof Error) {\r\n\r\n      if (_.isFunction(this.next)) {\r\n        this.next(value)\r\n      }\r\n    } else {\r\n\r\n      if (_.isFunction(this.next)) {\r\n        this.next(null, value, true)\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} value\r\n   *\r\n   * @memberOf Response\r\n   */\r\n  send(value: any) {\r\n\r\n    if (value instanceof Error) {\r\n\r\n      if (_.isFunction(this.next)) {\r\n        this.next(value)\r\n      }\r\n    } else {\r\n\r\n      if (_.isFunction(this.next)) {\r\n        this.next(null, value)\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @readonly\r\n   * @type {*}\r\n   * @memberOf Response\r\n   */\r\n  get payload(): any {\r\n\r\n    return this.ctx._response.value\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   *\r\n   * @memberOf Response\r\n   */\r\n  set payload(value) {\r\n\r\n    this.ctx._response.value = value\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   *\r\n   * @memberOf Response\r\n   */\r\n  set error(error) {\r\n\r\n    this.ctx._response.error = error\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @readonly\r\n   * @type {*}\r\n   * @memberOf Response\r\n   */\r\n  get error(): any {\r\n\r\n    return this.ctx._response.error\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = Response\r\n"]}